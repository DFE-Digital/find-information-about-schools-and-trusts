@page "/schools/governance/current"
@using DfE.FindInformationAcademiesTrusts.Extensions
@model CurrentModel

@{
    Layout = "_SchoolLayout";
}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <section class="app-table-container govuk-!-margin-bottom-9" data-testid="current-governors">
            @if (Model.SchoolGovernance.Current.Length > 0)
            {
                <table class="govuk-table govuk-!-margin-bottom-0 si-row-colours-table--school" data-module="moj-sortable-table" aria-describedby="current-governors">
                    <caption class="govuk-table__caption govuk-table__caption--m" id="current-governors" data-testid="subpage-header">Current governors</caption>
                    <thead class="govuk-table__head">
                        <tr class="govuk-table__row">
                            <th scope="col" class="govuk-body govuk-table__header" aria-sort="ascending">Name</th>
                            <th scope="col" class="govuk-body govuk-table__header" aria-sort="none">Role</th>
                            <th scope="col" class="govuk-body govuk-table__header" aria-sort="none">Appointed by</th>
                            <th scope="col" class="govuk-body govuk-table__header column-header-date" aria-sort="none">From</th>
                            <th scope="col" class="govuk-body govuk-table__header column-header-date" aria-sort="none">To</th>
                        </tr>
                    </thead>
                    <tbody class="govuk-table__body">
                        @foreach (var governor in Model.SchoolGovernance.Current)
                        {
                            <tr class="govuk-table__row" data-testid="current-members-row">
                                <th scope="row" class="govuk-body govuk-table__header" data-sort-value="@governor.FullName" data-testid="current-governors-name">
                                    @governor.FullName
                                </th>
                                <td class="govuk-body govuk-table__cell" data-sort-value="@governor.Role" data-testid="current-governors-role">
                                    @governor.Role
                                </td>
                                <td class="govuk-body govuk-table__cell" data-sort-value="@governor.AppointingBody" data-testid="current-governors-appointed">
                                    @governor.AppointingBody
                                </td>
                                <td class="govuk-body govuk-table__cell" data-sort-value="@governor.DateOfAppointment?.ToString(StringFormatConstants.SortableDateFormat)" data-testid="current-governors-from">
                                    @governor.DateOfAppointment.ShowDateStringOrReplaceWithText()
                                </td>
                                <td class="govuk-body govuk-table__cell" data-sort-value="@governor.DateOfTermEnd?.ToString(StringFormatConstants.SortableDateFormat)" data-testid="current-governors-to">
                                    @governor.DateOfTermEnd.ShowDateStringOrReplaceWithText()
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <h3 class="govuk-heading-m govuk-!-margin-bottom-3" data-testid="subpage-header">Current governors</h3>
                <p class="govuk-body govuk-!-margin-bottom-0">No Current governors</p>
            }
        </section>
    </div>
</div>
